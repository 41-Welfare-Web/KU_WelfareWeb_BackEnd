### **RentalWeb 요구사항 명세서 (v1.0)**

**1. 개요 (Overview)**

본 문서는 'RentalWeb' 서비스 구축에 필요한 기능적, 비기능적 요구사항을 정의합니다. 이 문서는 개발팀과 기획자 간의 공통된 이해를 바탕으로 성공적인 프로젝트 수행을 목표로 합니다.

**2. 유스케이스 (Use Cases)**

사용자(User)와 관리자(Admin)의 주요 상호작용을 정의합니다.

| ID | 액터 | 유스케이스 | 설명 |
| :--- | :--- | :--- | :--- |
| **계정 및 인증** | | | |
| UC-01 | 공통 | 회원가입 | 사용자가 시스템에 계정을 등록합니다. |
| UC-02 | 공통 | 로그인 | 사용자가 시스템에 로그인합니다. |
| UC-03 | 공통 | 아이디/비밀번호 찾기 | 사용자가 자신의 계정 정보를 찾습니다. |
| UC-04 | User | 회원정보 수정 | 사용자가 자신의 계정 정보를 변경합니다. |
| UC-05 | User | 회원 탈퇴 | 사용자가 시스템에서 탈퇴합니다. |
| **물품 및 대여** | | | |
| UC-06 | 공통 | 물품 검색 | 키워드, 카테고리로 물품을 검색합니다. |
| UC-07 | User | 물품 상세 조회 | 특정 물품의 상세 정보를 확인합니다. |
| UC-08 | User | 물품 장바구니 담기 | 대여할 물품을 장바구니에 추가합니다. |
| UC-09 | User | 장바구니에서 대여 예약 | 장바구니에서 여러 물품의 대여 기간을 설정하고 한번에 예약합니다. |
| UC-10 | User | 예약 현황 조회 | 자신의 예약/대여 상태를 확인합니다. |
| UC-11 | User | 물품 예약 수정 | '예약' 상태인 자신의 대여 건에 대해 기간이나 수량을 변경합니다. |
| UC-12 | User | 예약 취소 | '예약' 상태인 자신의 대여 건을 취소합니다. |
| **플로터** | | | |
| UC-13 | User | 플로터 주문 신청 | 플로터 인쇄를 위해 날짜를 선택하고 파일을 업로드하여 주문을 신청합니다. |
| UC-14 | User | 플로터 주문 취소 | 신청한 주문을 취소합니다. ('주문 대기' 상태 한정) |
| **관리자 전용** | | | |
| UC-15 | Admin | 재고 관리 | 물품의 목록 및 재고를 관리합니다. (등록/수정/삭제) |
| UC-16 | Admin | 대여 상태 관리 | 사용자의 대여 예약 상태(예약, 대여 중, 반납, 취소)를 관리하고, 필요한 경우 사유를 기록합니다. |
| UC-17 | Admin | 사용자 관리 | 관리자가 사용자의 목록을 조회하고 역할을 변경합니다. |
| UC-18 | Admin | 플로터 주문 관리 | 신청된 주문을 승인하거나 반려하고, 완료 처리합니다. |
| UC-19 | Admin | 운영일 관리 | 휴무일 및 운영 일정을 설정하고 관리합니다. |


**3. 기능 요구사항 (Functional Requirements)**

유스케이스를 기반으로 시스템이 반드시 수행해야 하는 기능들을 상세히 기술합니다.

| ID | 요구사항 명 | 설명 |
| :--- | :--- | :--- |
| **사용자 관리 (계정)** | | |
| FR-01 | 회원가입 및 약관 동의 | 사용자는 약관 동의 후 계정 정보를 입력하여 가입한다.<br>- **약관:** 서비스 이용약관 및 개인정보 처리방침(필수) 동의 절차 선행.<br>- **단위 선택:** **검색 가능한 드롭다운(Searchable Select)**을 제공하며, 서버에서 제공하는 `plotter_departments_list`를 기반으로 선택한다.<br>- **SMS 인증:** 인증번호 유효 시간은 **5분**이며, 어뷰징 방지를 위해 하루 최대 5회 발송 가능, **입력 실패 5회 시 인증번호는 즉시 만료**된다.<br>- **인증 절차:** [인증번호 요청] -> [인증번호 확인(프론트 버튼 활성화)] -> [회원가입(최종 검증)] 단계를 거친다.<br>- **중복 차단:** 아이디, 학번, 전화번호가 이미 등록된 경우 가입을 차단한다. |
| FR-02 | ID 중복 확인 | 사용자가 ID 입력 후, 시스템은 자동으로 중복 여부를 검사한다.<br>- **유효성 규칙:** 아이디는 5~20자의 영문 소문자, 숫자만 사용 가능하다.<br>- **피드백:** 사용 가능 시 초록색, 불가능 시 빨간색으로 입력란 하단에 안내 메시지를 표시한다. |
| FR-03 | 로그인 | 가입된 아이디와 비밀번호로 시스템에 로그인할 수 있다.<br>- 로그인 성공 시, 서버는 세션 유지를 위한 **JWT(Access Token, Refresh Token)**를 발급한다.<br>- **5회 이상** 로그인 실패 시, 계정을 **10분간 잠금** 처리하여 무차별 대입 공격을 방지한다.<br>- 로그인 실패 시, "아이디 또는 비밀번호가 일치하지 않습니다." 라는 통일된 메시지를 표시한다. |
| FR-04 | 아이디/비밀번호 찾기 | 사용자는 가입 시 인증한 전화번호 등을 통해 자신의 계정 정보를 찾을 수 있다. |
| FR-05 | 회원정보 수정 | 사용자는 로그인 후 마이페이지 등에서 자신의 비밀번호, 전화번호, 단위 정보를 수정할 수 있다. |
| FR-06 | 회원 탈퇴 | 사용자는 본인 확인 절차를 거친 후 서비스에서 탈퇴할 수 있다. 탈퇴 시 개인정보 처리 방침을 안내해야 한다. |
| FR-07 | 역할 기반 접근 | 사용자는 역할(User/Admin)에 따라 접근할 수 있는 기능이 제한된다.<br>- **Admin 전용**: `FR-19` ~ `FR-24`, `FR-30`<br>- **User 전용**: `FR-05`, `FR-06`, `FR-09` ~ `FR-17`, `FR-26` ~ `FR-29`<br>- **모든 사용자**: `FR-08` |
| **물품 및 대여 (장바구니 기반)** | | |
| FR-08 | 물품 목록 조회 | 사용자는 모든 물품을 목록 형태로 볼 수 있다.<br>- 별도의 페이지네이션 없이 **모든 물품을 한 번에** 보여준다.<br>- 사용자는 **최신순, 이름순, 인기순(대여 횟수)** 등 다양한 기준으로 목록을 정렬할 수 있다.<br>- 기본 정렬 순서는 **인기순**으로 하며, 인기순 값이 동일할 경우 **이름순**으로 정렬한다. |
| FR-09 | 물품 검색 | 사용자는 이름 또는 카테고리로 원하는 물품을 검색할 수 있다.<br>- 이름 검색은 **부분 일치**를 지원한다. (예: '카메라' 검색 시 '디지털 카메라' 포함)<br>- 카테고리는 **다중 선택 필터링**을 지원한다.<br>- 검색 결과가 없는 경우, "검색 결과가 없습니다." 라는 메시지를 명확하게 표시한다. |
| FR-10 | 물품 상세 조회 | 사용자는 특정 물품의 상세 정보를 볼 수 있다.<br>- 페이지 상단에는 **물품의 이름, 대표 이미지(썸네일), 총 재고 수량**이 표시되며, **날짜별 이용 가능 수량이 표시되는 캘린더**가 제공된다.<br>- 페이지 본문은 관리자가 등록한 여러 이미지와 텍스트 설명이 순서대로 쭉 이어져 나오는 **단일 콘텐츠 영역**(`description` 컬럼에 HTML/Markdown 저장)으로 구성된다. (홈쇼핑 사이트 스타일)<br>- **(추후 고려)** 본문 삽입용 이미지를 업로드하기 위한 관리자 전용 업로드 API 및 에디터 연동 필요. |
| FR-11 | 장바구니에 물품 추가 | 사용자는 물품 상세 페이지에서 원하는 수량을 선택하여 장바구니에 담을 수 있다. |
| FR-12 | 미니 장바구니 | 물품 상세 페이지 우측에는, 현재 장바구니에 담긴 물품 목록을 보여주는 **사이드바(미니 장바구니)**가 표시된다. |
| FR-13 | 장바구니 조회 및 수정 | 장바구니 페이지는 **왼쪽에 캘린더, 오른쪽에 담은 물품 목록**으로 구성된다.<br>- **초기 상태:** 페이지 진입 시 **목록의 첫 번째 물품이 자동으로 선택**되어 해당 물품의 재고 현황(FR-14)이 캘린더에 표시된다.<br>- **빈 장바구니:** 장바구니에 담긴 물품이 없는 경우, "아직 담은 물품이 없습니다."와 같은 안내 UI를 표시한다.<br>- 사용자는 오른쪽 목록에서 각 물품의 수량을 조절하거나 삭제할 수 있다. |
| FR-14 | 대여 기간 선택 및 재고 확인 | 사용자가 장바구니의 **특정 품목을 클릭**하면, 왼쪽 캘린더의 내용이 해당 품목의 **날짜별 대여 가능 재고**를 보여주도록 즉시 업데이트된다.<br>- 사용자가 캘린더에서 대여 시작일과 반납일을 선택하면, 시스템은 해당 기간 동안 요청한 수량이 대여 가능한지 실시간으로 검증한다. 재고가 0개인 경우 예약은 불가능하다.<br>- **휴무일 검증:** 주말(토, 일) 및 `holidays` 테이블에 등록된 휴무일에는 대여 시작 및 반납을 선택할 수 없으며, 서버에서 최종 차단한다.<br>- **최대 예약 기간:** 대여 예약은 **오늘 날짜 기준 2개월 이내**의 기간에 대해서만 가능하다. |
| FR-15 | 대여 정보 확인 및 최종 확정 | 장바구니의 모든 품목에 대한 기간 선택이 완료되면 '대여 확정' 페이지로 이동할 수 있다.<br>- 이 페이지에서는 대여할 모든 물품과 선택한 기간이 요약되어 표시된다.<br>- 대여자의 정보(이름, 학번, 전화번호, 단위)가 계정 정보에서 자동으로 입력되며, 이 중 **'단위' 정보는 수정 가능**하다.<br>- 사용자가 '대여 확정' 버튼을 누르면, 장바구니에 있던 모든 품목에 대해 '예약' 상태의 대여 건들이 각각 생성된다. |
| FR-16 | 물품 예약 수정 | 사용자는 '예약' 상태인 대여 건에 대해 기간이나 수량을 수정할 수 있다.<br>- 수정 시 시스템은 변경하려는 기간에 대해 실시간 재고 확인(FR-14)을 재수행한다.<br>- 재고가 부족하거나 운영 원칙에 어긋나는 경우 수정이 제한된다. |
| FR-17 | 물품 예약 취소 | 사용자는 '예약' 상태인 대여 건을 취소할 수 있다.<br>- 취소 시 즉시 해당 수량만큼 재고가 복구된다.<br>- 이미 '대여 중'이거나 '반납' 처리된 건은 취소할 수 없다. |
| **사용자 공통 기능** | | |
| FR-18 | 알림 서비스 (SMS) | 주요 이벤트 발생 시 외부 SMS 서비스와 연동하여 사용자에게 알림을 발송한다.<br>- **물품:** 예약 완료, 반납일 전일(D-1), 연체 발생 시.<br>- **플로터:** 주문 **반려(사유 포함)**, **인쇄 완료(수령 안내)** 시 필수 발송. |
| **관리자 기능** | | |
| FR-19 | 물품 관리 | 관리자는 물품을 등록, 수정, 삭제할 수 있다. |
| FR-20 | 대여 상태 관리 | 관리자는 대여/예약 건의 상태를 변경할 수 있다.<br>- **상태 정의:** 예약, 대여 중, 반납 완료(정상), 반납 완료(불량), 예약 취소.<br>- **수동 예약 추가 (대리 신청):** 관리자가 특정 사용자를 위해 새 예약을 생성한다. (이력에 관리자 ID가 actorId로 기록됨)<br>- **대여 처리:** '예약' 상태인 건을 '대여 중'으로 변경 (물품 수령 시).<br>- **반납 처리:** '대여 중'인 건을 '반납 완료'로 변경. **정상**과 **불량** 중 선택하며, **불량** 선택 시 **불량 내용(비고)**을 필수로 입력해야 한다.<br>- **예약 취소:** '예약' 상태인 건을 '예약 취소'로 변경. 관리자는 **취소 사유**를 필수로 입력해야 한다. |
| FR-21 | 대여/예약 변경 이력 추적 | 모든 대여/예약 건의 상태 변경(생성, 취소, 상태 변경 등)은 별도의 이력으로 기록되어야 한다. 이 기록에는 **변경 시간, 변경 주체(사용자, 관리자 ID), 변경 내용**이 포함되어 문제 발생 시 추적이 가능해야 한다. |
| FR-22 | 사용자 목록 조회 | 관리자는 전체 사용자 목록을 이름, 학번 등으로 검색하고 조회할 수 있다. |
| FR-23 | 사용자 역할 변경 | 관리자는 특정 사용자의 역할을 'User' 또는 'Admin'으로 변경할 수 있다. |
| **정책 (추후 논의)** | | |
| FR-24 | 연체 정책 | 반납 예정일이 지난 '대여 중'인 건에 대한 처리 정책. (**자동 연체 처리 스케줄러 도입 예정**) |
| FR-25 | 물품 상태 관리 정책 | 물품의 파손/고장 시 상태를 추적하고 대여를 제한하는 기능. **반납 완료(불량)** 처리 시 자동으로 이력에 기록된다. |
| **플로터 주문** | | |
| FR-26 | 수령 예정일 안내 | 시스템은 **평일(월~금)** 운영을 원칙으로 하며, 주말/공휴일 및 관리자가 지정한 **휴무일**은 자동으로 제외된다.<br>- 사용자는 별도의 날짜나 시간을 선택하지 않으며, 시스템이 **오늘 날짜 기준 영업일(Business Day) 2일 뒤**를 수령 예정일로 자동 계산하여 신청 화면에 고지한다. |
| FR-27 | 플로터 주문 신청 및 파일 검증 | 사용자는 인쇄 목적, 용지 크기, 인쇄 장수 등을 입력하고 파일을 업로드한다.<br>- **파일 검증:** 서버는 업로드된 파일의 **헤더(Magic Number: %PDF-)**를 직접 검사하여 실제 PDF 파일인지 확인한다. (이미지, PSD 등 타 형식의 확장자 위조 차단)<br>- **안내:** 주문 완료 시 "주문일로부터 근무일 기준 2일 뒤 수령 가능합니다." 안내 제공. |
| FR-28 | 유료/무료 구분 및 입금 절차 | 시스템은 사용자의 정보와 선택한 목적에 따라 유/무료를 자동 판별한다.<br>- **무료 조건:** 사용자의 소속 단위가 **'중앙동아리'** 또는 **'자치기구'**이며, 인쇄 목적이 **'예산안 출력'** 등 지정된 무료 항목일 경우.<br>- **유료 조건:** 위 무료 조건에 해당하지 않는 모든 경우.<br>- **가격 산출:** 서버 설정에 등록된 용지별 단가(A0, A1 등)와 장수를 곱하여 최종 금액을 자동 계산한다.<br>- **실시간 미리보기:** 사용자가 신청 폼을 채우는 동안 요약창을 통해 예상 결제 금액을 실시간으로 안내한다.<br>- **유료 프로세스:** 주문 화면에 **입금 금액 및 계좌번호**가 자동으로 표시되며, 사용자는 **입금 내역 캡처 이미지**를 반드시 업로드해야 한다. 관리자는 이를 확인 후 인쇄를 진행한다. |
| FR-29 | 주문 취소 | 사용자는 주문 상태가 **'주문 대기'**인 경우에 한해 주문을 취소(삭제)할 수 있다.<br>- 주문 정보의 수정은 지원하지 않으며, 필요 시 취소 후 재신청해야 한다. |
| FR-30 | 플로터 주문 상태 관리 (관리자) | 관리자는 주문 상태를 변경하며, 주요 상태 변경 시 **SMS 알림**이 발송된다.<br>- **상태 정의:** 주문 대기, 주문 확정, 인쇄 완료, 주문 반려, 수령 완료.<br>- **주문 확정:** 관리자 승인 완료.<br>- **인쇄 완료:** 출력 완료 상태. 사용자에게 **수령 안내 문자**가 자동 발송된다.<br>- **수령 완료:** 사용자가 결과물을 수령한 상태.<br>- **반려:** 주문 거절 상태. 반드시 **반려 사유**를 입력해야 하며, 사용자에게 **사유가 포함된 문자**가 발송된다. |
| FR-31 | 운영일 및 휴무일 관리 | 관리자는 캘린더를 통해 운영일과 휴무일을 설정할 수 있다.<br>- 설정된 휴무일은 물품 대여 예약 및 플로터 주문 시 주문 불가일로 자동 반영된다.<br>- 시스템은 기본적으로 주말(토, 일)을 휴무일로 판단하며, 추가적인 공휴일이나 단체 지정 휴무일은 관리자가 등록하여 관리한다. |
| **신규 추가 기능 (v1.1)** | | |
| FR-32 | 물품 미래 재고 조회 (캘린더) | 사용자가 특정 기간(예: 1개월) 동안의 물품 재고 현황을 날짜별로 한 번에 조회할 수 있다.<br>- 특정 날짜를 기준으로 현재 대여/예약 중인 수량을 합산하여 가용 재고를 산출한다. |
| FR-33 | 마이페이지 대시보드 요약 | 사용자는 로그인 후 대시보드에서 자신의 이용 현황을 한눈에 확인한다.<br>- **항목:** 대여 중인 물품 건수, 가장 빠른 반납 예정일, 진행 중인 플로터 주문 상태 요약 등. |
| FR-34 | 개별 실물 자산 관리 | 관리자는 물품 종류 하위의 개별 실물(Serial Number)을 관리할 수 있다.<br>- **기능:** 실물 등록, 수정(상태 변경), 삭제.<br>- **상태:** AVAILABLE, RENTED, BROKEN 등을 지원한다. |
| FR-35 | 공용 이미지 업로드 | 관리자 및 사용자가 물품 등록, 설명 삽입, 영수증 증빙 등을 위해 이미지를 서버에 업로드하고 URL을 획득할 수 있다.<br>- 허용 확장자: jpg, png, jpeg, webp. |

**4. 비기능 요구사항 (Non-functional Requirements)**

시스템의 품질, 성능, 보안 등 전반적인 제약 조건을 정의합니다.

| 분류 | 요구사항 | 설명 |
| :--- | :--- | :--- |
| **성능 (Performance)** |
| NFR-01 | 시스템 응답성 및 로딩 피드백 | 모든 페이지 로드 및 API 요청은 최대한 신속하게 처리되어야 한다. 만약 요청이 **1초 이상** 소요될 경우, 사용자에게 작업 중임을 알리는 **Loading Spinner**를 자동으로 노출해야 한다. 또한 Skeleton UI와 이미지 Lazy Loading을 적극 활용하여 체감 성능을 최적화한다. |
| **사용성 (Usability)** |
| NFR-02 | 반응형 웹 | 데스크톱, 태블릿, 모바일 등 다양한 화면 크기(해상도)에 대응하여 최적화된 UI를 제공해야 한다.<br>- 화면 크기에 따라 UI 배치 및 콘텐츠가 유연하게 조정되어야 한다. |
| NFR-03 | 직관적인 UI | 사용자는 별도의 학습 없이 서비스의 주요 기능을 쉽게 사용할 수 있어야 한다. |
| **보안 (Security)** |
| NFR-04 | 비밀번호 암호화 | 사용자의 비밀번호는 복호화가 불가능한 방식으로 암호화하여 저장해야 한다. |
| NFR-05 | 인증 및 인가 | 인증은 **JWT(JSON Web Token)** 방식을 표준으로 한다. 클라이언트는 API 요청 시 토큰을 전송하며, 서버는 매 요청마다 토큰의 유효성과 사용자의 역할(Role) 권한을 검증해야 한다. |
| NFR-06 | 웹 취약점 방어 | SQL Injection, XSS 등 주요 웹 공격에 대한 기본적인 방어 로직을 갖추어야 한다.<br>- **API 보안:** 주요 인증 API(SMS 발송 등)는 IP당 **분당 3회**의 요청 제한(Rate Limiting)을 적용하여 과금 폭탄 및 DDoS를 방지한다.<br>- **통신 보안:** 모든 통신은 **HTTPS**를 적용한다. |
| **유지보수성 (Maintainability)** |
| NFR-07 | 코드 컨벤션 | 프로젝트는 일관된 코드 스타일과 명명 규칙을 따라야 한다. |
| NFR-08 | 로깅 및 에러 추적 | 주요 이벤트와 서버 에러 발생 시 발생 시각, 에러 메시지, 호출된 API 경로를 포함하여 기록하여 문제 추적을 용이하게 해야 한다. |
| NFR-09 | 무상태(Stateless) 아키텍처 | 서버는 사용자 인증 정보나 임시 데이터(예: 인증 코드)를 메모리에 저장하지 않고, DB 또는 외부 저장소를 사용하여 서버 재시작 및 확장에 유연하게 대응해야 한다. |
| NFR-10 | 운영 정책의 유연성 (Configurable) | 대여 기간, 수령 대기일, 인증 유효 시간 등 자주 변경될 수 있는 운영 정책 값은 코드가 아닌 시스템 설정(DB)으로 분리하여, 배포 없이 즉시 변경 가능해야 한다. |