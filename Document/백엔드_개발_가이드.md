# RentalWeb 백엔드 개발 가이드

이 문서는 다른 컴퓨터에서 개발을 시작하거나, 새로운 팀원이 합류했을 때 필요한 세팅 및 개발 규칙을 안내합니다.

---

## 1. 초기 개발 환경 세팅 (New Machine)

### 필수 설치 도구
- **Node.js**: v18 이상 추천
- **Git**: 소스 코드 관리
- **PostgreSQL**: (직접 설치하거나 Supabase 사용 권장)

### 프로젝트 시작 순서
1.  **소스 코드 클론**
    ```bash
    git clone https://github.com/your-repo/RentalWeb.git
    cd Project/server
    ```
2.  **의존성 패키지 설치**
    ```bash
    npm install
    ```
3.  **환경 변수 설정**
    - `Project/server/.env.example` 파일을 복사하여 `.env` 파일을 생성합니다.
    - `DATABASE_URL`과 `JWT_SECRET`을 자신의 환경에 맞게 수정합니다.
4.  **데이터베이스 스키마 동기화 (Prisma)**
    ```bash
    # DB에 테이블 생성
    npx prisma db push
    # 관리자 계정 등 초기 데이터(Seed) 삽입
    npm run prisma:seed
    ```
5.  **서버 실행**
    ```bash
    npm run start:dev
    ```

---

## 2. 주요 개발 규칙 (Convention)

### Naming Case
- **API Request/Response**: 모든 JSON 필드는 `camelCase`를 사용합니다. (예: `studentId`, `phoneNumber`)
- **Database**: DB 테이블 및 컬럼은 `snake_case`로 저장되나, Prisma의 `@map` 기능을 통해 코드 내에서는 `camelCase`로만 다룹니다.

### API 문서화 (Swagger)
- 모든 API는 코드를 작성하면 자동으로 문서화됩니다.
- 접속 주소: `http://localhost:3000/api-docs`
- 새로운 DTO를 만들 때 `@ApiProperty({ example: '...' })`를 추가하여 예시 데이터를 제공해야 합니다.

### 날짜 처리 (Date Handling)
- API 통신 시 날짜는 `YYYY-MM-DD` (ISO 8601 Date only) 문자열 형식을 선호합니다.
- 서버 로직 내부에서 비교 시 타임존 이슈를 방지하기 위해 `new Date()` 변환 후 UTC 기준으로 처리합니다.

---

## 3. 테스트 및 검증 방법

### 자동 검증 스크립트 (PowerShell)
코드 수정 후 아래 스크립트를 실행하여 주요 기능(로그인, 재고 체크 등)이 망가지지 않았는지 확인하세요.
```powershell
# Project/server 폴더에서 실행
.\verify_api.ps1
.\verify_auth_plotter.ps1
```

---

## 4. 배포 정보
- 현재 백엔드는 **Railway**를 통해 자동 배포되도록 구성할 예정입니다.
- 배포 시 `.env` 파일의 변수들을 Railway 대시보드 환경변수 설정에 반드시 등록해야 합니다.
